<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Name Generator-inator</title>
    <link rel="stylesheet" href="dnd.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
      function reloadData() {
        console.log(`Reloading data`)
        $.get(`./names/reload`, (result) => {
          $('#results').empty().append("Name generators reloaded.")
        })
      }

      function getTypes() {
        $('#nameTypes').empty()
        $.get(`./names/types`, (data) => {
          for (let i=0; i < data.length; i++) {
            const type = data[i].type
            const flavor = data[i].flavor || ''
            const st = `<span>${flavor}${(flavor) ? ' ' : ''}${type}</span></br>`
            $('#nameTypes').append(st)
          }
          $('#nameTypes span').addClass('clickable').on('click', clickItem)
        })
      }

      function generateNames(count, type, flavor) {
        $('#results').empty()
        $.get(`./names/${count}/${type}/${flavor}`, (data) => {
          for (let i=0; i < data.length; i++) {
            $('#results').append(`${data[i]}<br/>`)
          }
        })
      }

      function clickItem(ev) {    // to do: add count parameter input
        const arr = $(ev.target).text().split(' ')
        if (arr.length > 1) {
          generateNames(10, arr[1], arr[0]) // type, flavor
        } else {
          generateNames(10, arr[0], '')     // type only
        }
      }

      $(document).ready(getTypes)
    </script>
    </head>
  <body>
    <a href="index.html">< Home</a>
    <h1>Name Generator-inator</h1>
    <p>Generate names for various things.</p>
    <p style="font-weight: bold; cursor: pointer;" onclick="reloadData()">Reload Generators</p>
    <div id="nameTypes" style="margin-bottom:10px">
    </div>
    <div id="results"></div>
  </body>
</html>